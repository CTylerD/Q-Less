{"ast":null,"code":"var _jsxFileName = \"/Users/Tyla/Documents/Programming/OSU/Classes/361/cs361/qless/react-app/src/components/Board.js\",\n    _s = $RefreshSig$();\n\nimport BoardSquare from \"../components/BoardSquare.js\";\nimport { Dice, rollDice } from \"../components/Dice.js\";\nimport { useState, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet diceArray, boardArray, currentBoardState;\n\nfunction newGame() {\n  diceArray = rollDice();\n  boardArray = buildBoard();\n}\n\nfunction saveGame() {\n  let savedGame = {\n    \"dice\": diceArray,\n    \"words\": [],\n    \"board\": useState.exportBoardArray()\n  };\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(savedGame)\n  };\n  fetch('/save', requestOptions).then(response => response.json()).then(data => this.setState({\n    postId: data.id\n  }));\n}\n\nfunction buildBoard() {\n  boardArray = [];\n\n  for (let i = 0; i < 12; i++) {\n    for (let j = 0; j < 12; j++) {\n      // let boardSquare = document.createElement(\"BoardSquare\");\n      // boardSquare.id = `${j}-${i}`;\n      // boardSquare.className = \"boardsquare\"\n      // let dice = document.createElement(\"Dice\");\n      // dice.className = \"dice\";\n      // dice.innerText = diceArray[j];\n      // boardSquare.appendChild(dice);\n      if (i === 0) {\n        boardArray.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          id: `${j}-${i}`,\n          className: \"boardsquare\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dice\",\n            children: diceArray[j]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 77\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 31\n        }, this));\n      } else {\n        boardArray.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          id: `${j}-${i}`,\n          className: \"boardsquare\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 31\n        }, this));\n      }\n    }\n  }\n\n  return boardArray;\n}\n\nexport default function Board() {\n  _s();\n\n  const boardRef = useRef(null);\n  newGame();\n  let activeDice = null;\n\n  function grabPiece(e) {\n    const element = e.target;\n    const board = boardRef.current;\n\n    if (element.classList.contains(\"dice\") && board) {\n      const x = e.clientX - 30;\n      const y = e.clientY - 30;\n      element.style.position = \"absolute\";\n      element.style.left = `${x}px`;\n      element.style.top = `${y}px`;\n      activeDice = element;\n    }\n  }\n\n  function movePiece(e) {\n    const board = boardRef.current;\n\n    if (activeDice && board) {\n      const minX = board.offsetLeft;\n      const minY = board.offsetTop;\n      const maxX = board.offsetLeft + board.clientWidth - 45;\n      const maxY = board.offsetTop + board.clientHeight - 45;\n      const x = e.clientX - 30;\n      const y = e.clientY - 30;\n      activeDice.style.position = \"absolute\";\n\n      if (x > maxX) {\n        activeDice.style.left = `${maxX - 7}px`; //activeDice = null;\n      } else if (x < minX) {\n        activeDice.style.left = `${minX + 5}px`; //activeDice = null;\n      } else {\n        activeDice.style.left = `${x}px`;\n      }\n\n      if (y > maxY) {\n        activeDice.style.top = `${maxY - 9}px`; //activeDice = null;\n      } else if (y < minY) {\n        activeDice.style.top = `${minY + 5}px`; //activeDice = null;\n      } else {\n        activeDice.style.top = `${y}px`;\n      }\n    }\n  }\n\n  function dropPiece(e) {\n    if (activeDice) {\n      const element = e.target;\n      element.parentNode.removeChild(element);\n      let currElems = document.elementsFromPoint(e.clientX, e.clientY);\n      let parentSquare = Array.from(currElems).filter(fil => fil.className == \"boardsquare\")[0];\n      parentSquare.appendChild(element);\n      let offsets = parentSquare.getBoundingClientRect();\n      const x = offsets.left + 1;\n      const y = offsets.top + 1;\n      activeDice.style.top = `${y}px`;\n      activeDice.style.left = `${x}px`;\n      activeDice.style.position = \"static\";\n      activeDice = null;\n      currentBoardState = exportBoardArray();\n    }\n  }\n\n  function getBoardSquares() {\n    let board = boardRef.current;\n    return board.getElementsByClassName(\"boardsquare\");\n  }\n\n  function exportBoardArray() {\n    let boardStateArray = [];\n    let board = getBoardSquares();\n\n    for (const square of board) {\n      let squareContents = square.getElementsByClassName(\"dice\");\n      let contents = squareContents.item(0);\n\n      if (contents) {\n        boardStateArray.push(contents.textContent);\n      } else {\n        boardStateArray.push(null);\n      }\n    }\n\n    return boardStateArray;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onMouseDown: e => grabPiece(e),\n    onMouseMove: e => movePiece(e),\n    onMouseUp: e => dropPiece(e),\n    on: true,\n    className: \"board\",\n    ref: boardRef,\n    children: boardArray\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 13\n  }, this);\n}\n\n_s(Board, \"XcdElC4+nkqWjXVI0f2NZ9bgrbc=\");\n\n_c = Board;\n\nvar _c;\n\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["BoardSquare","Dice","rollDice","useState","useRef","diceArray","boardArray","currentBoardState","newGame","buildBoard","saveGame","savedGame","exportBoardArray","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","json","data","setState","postId","id","i","j","push","Board","boardRef","activeDice","grabPiece","e","element","target","board","current","classList","contains","x","clientX","y","clientY","style","position","left","top","movePiece","minX","offsetLeft","minY","offsetTop","maxX","clientWidth","maxY","clientHeight","dropPiece","parentNode","removeChild","currElems","document","elementsFromPoint","parentSquare","Array","from","filter","fil","className","appendChild","offsets","getBoundingClientRect","getBoardSquares","getElementsByClassName","boardStateArray","square","squareContents","contents","item","textContent"],"sources":["/Users/Tyla/Documents/Programming/OSU/Classes/361/cs361/qless/react-app/src/components/Board.js"],"sourcesContent":["import BoardSquare from \"../components/BoardSquare.js\"\nimport {Dice, rollDice} from \"../components/Dice.js\"\nimport {useState, useRef} from \"react\";\n\nlet diceArray, boardArray, currentBoardState;\n\nfunction newGame () {\n    diceArray = rollDice();\n    boardArray = buildBoard();\n}\n\nfunction saveGame () {\n    let savedGame = {\"dice\": diceArray,\n    \"words\": [],\n    \"board\": useState.exportBoardArray()\n    }\n\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(savedGame)\n    };\n  fetch('/save', requestOptions)\n      .then(response => response.json())\n      .then(data => this.setState({ postId: data.id }));\n}\n\n\nfunction buildBoard() {\n  boardArray = [];\n  for (let i = 0; i < 12; i++) {\n      for (let j = 0; j < 12; j++) {\n          // let boardSquare = document.createElement(\"BoardSquare\");\n          // boardSquare.id = `${j}-${i}`;\n          // boardSquare.className = \"boardsquare\"\n          // let dice = document.createElement(\"Dice\");\n          // dice.className = \"dice\";\n          // dice.innerText = diceArray[j];\n          // boardSquare.appendChild(dice);\n          if (i === 0) {\n              boardArray.push(<div id={`${j}-${i}`} className=\"boardsquare\"><div className=\"dice\">{diceArray[j]}</div></div>);\n          } else {\n              boardArray.push(<div id={`${j}-${i}`} className=\"boardsquare\"></div>);\n          }\n      }\n  }\n  return boardArray;\n}\n\nexport default function Board() {\n    const boardRef = useRef(null);\n    newGame();\n    let activeDice = null;\n\n    function grabPiece(e) {\n        const element = e.target;\n        const board = boardRef.current;\n        \n        if (element.classList.contains(\"dice\") && board) {\n            const x = e.clientX - 30;\n            const y = e.clientY - 30;\n\n            element.style.position = \"absolute\";\n            element.style.left = `${x}px`;\n            element.style.top = `${y}px`;\n            \n            activeDice = element\n            \n        }\n    }\n\n    function movePiece(e) {\n        const board = boardRef.current;\n        if (activeDice && board) { \n\n            const minX = board.offsetLeft;\n            const minY = board.offsetTop;\n            const maxX = board.offsetLeft + board.clientWidth - 45;\n            const maxY = board.offsetTop + board.clientHeight - 45;\n            const x = e.clientX - 30;\n            const y = e.clientY - 30;\n            activeDice.style.position = \"absolute\";\n            \n            if (x > maxX) {\n                activeDice.style.left = `${maxX - 7}px`;\n                //activeDice = null;\n            } else if (x < minX) {\n                activeDice.style.left = `${minX + 5}px`;\n                //activeDice = null;\n            } else {\n                activeDice.style.left = `${x}px`;\n            }\n\n            if (y > maxY) {\n                activeDice.style.top = `${maxY - 9}px`;\n                //activeDice = null;\n            } else if (y < minY) {\n                activeDice.style.top = `${minY + 5}px`;\n                //activeDice = null;\n            } else {\n                activeDice.style.top = `${y}px`;\n            }\n\n        }\n    }\n\n    function dropPiece(e) {\n        if (activeDice) {\n            const element = e.target;\n            element.parentNode.removeChild(element);\n            let currElems = document.elementsFromPoint(e.clientX, e.clientY);\n            let parentSquare = Array.from(currElems).filter(fil => fil.className == \"boardsquare\")[0];\n            parentSquare.appendChild(element);\n            let offsets = parentSquare.getBoundingClientRect();\n\n            const x = offsets.left + 1;\n            const y = offsets.top + 1;\n            activeDice.style.top = `${y}px`;\n            activeDice.style.left = `${x}px`;\n            activeDice.style.position = \"static\";\n\n            activeDice = null;\n\n            currentBoardState = exportBoardArray();\n            \n        }\n    }\n\n    function getBoardSquares() {\n        let board = boardRef.current;\n        return board.getElementsByClassName(\"boardsquare\");\n    }\n    function exportBoardArray() {\n        let boardStateArray = [];\n        let board = getBoardSquares();\n\n        for (const square of board) {\n            let squareContents = square.getElementsByClassName(\"dice\");\n            let contents = squareContents.item(0);\n\n            if (contents) {\n                boardStateArray.push(contents.textContent);\n            } else {\n                boardStateArray.push(null);\n            }\n        }\n        return boardStateArray;\n    }\n\n    return (<div onMouseDown={e => grabPiece(e)}\n                 onMouseMove={e => movePiece(e)}\n                 onMouseUp={e => dropPiece(e)}\n                 on\n                 className=\"board\"\n                 ref={boardRef}>{boardArray}</div>\n                 );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}